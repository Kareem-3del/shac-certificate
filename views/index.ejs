<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHA Certificate Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    * {
      font-family: "Inter", sans-serif;
      margin: 0;
      padding: 0;
    }
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .card-hover {
      transition: all 0.3s ease;
      transform: translateY(0);
    }
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    .glass-effect {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .animate-fade-in {
      animation: fadeIn 0.8s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<header  style="background-color: #03242c;" class="fixed top-0 w-full  z-10">
  <nav class="text-white">
    <div class="container mx-auto">
      <div class="justify-between items-center">
        <div class="">
          <div class="flex p-0 flex-wrap h-full    items-center">
            <!-- Contact Info Section -->
            <div class="hidden lg:flex items-center w-full lg:w-5/12">
              <div class="flex items-center mr-8">
                <i class="fa fa-envelope-o text-lg"></i>
                <a href="mailto:info@precertificationn.com" class="ml-2">info@precertificationn.com</a>
              </div>
              <div class="flex items-center">
                <i class="fa fa-phone text-lg"></i>
                <span class="ml-2">+1 (984) 833-3963</span>
              </div>
            </div>
            <!-- Administration and Social Links Section -->
            <div class="w-full lg:w-7/12 text-right  flex  w-fit mr-auto  items-center justify-end" style="min-height: 50px">
              <a href="/settings" class="mr-5 inline-block hover:text-blue-300 transition-colors" rel="noopener" aria-label="administration">
                <i class="fas fa-cog mr-1"></i>Administration
              </a>
              <a href="/settings/email" class="mr-5 inline-block hover:text-blue-300 transition-colors" rel="noopener" aria-label="bulk email">
                <i class="fas fa-envelope-bulk mr-1"></i>Bulk Email
              </a>
              <form action="/auth/logout/" method="GET">
                <button type="submit" class="px-4 py-2 font-semibold text-white rounded-md hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition duration-200">
                  <i class="fas fa-sign-out-alt mr-1"></i>Logout
                </button>
              </form>
              <div class="bg-white  hidden lg:inline-block">
                <div class="flex items-center">
                  <a href="https://ksacpr.org.sa/Login.aspx" class="text-black text-sm h-14 flex justify-center items-center p-5" target="_blank" rel="noopener" aria-label="old website">
                    To download certificates issued before 18 April 2024 kindly click here
                  </a>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="bg-white container mx-auto">
          <a href="/" class="text-black font-bold">
            <img alt="logo" class="h-14" src="https://shacpr.org.sa/images/sha.png">
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<body class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
  <!-- Dashboard Header -->
  <div class="container mx-auto px-6 pt-32 pb-8">
    <div class="text-center mb-12 animate-fade-in">
      <h1 class="text-4xl font-bold text-gray-800 mb-4">
        <i class="fas fa-certificate text-blue-600 mr-3"></i>
        Certificate Dashboard
      </h1>
      <p class="text-gray-600 text-lg">Select and generate your professional certificates</p>
      <div class="mt-4 inline-flex items-center px-4 py-2 bg-blue-50 rounded-full text-blue-700 text-sm">
        <i class="fas fa-user-circle mr-2"></i>
        Welcome, <%= user.name || 'User' %>
      </div>
    </div>

    <!-- Statistics Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 animate-fade-in">
      <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-500 text-sm font-medium">Available Certificates</h3>
            <p class="text-2xl font-bold text-gray-800"><%= settings.length %></p>
          </div>
          <div class="bg-blue-100 p-3 rounded-full">
            <i class="fas fa-certificate text-blue-600 text-xl"></i>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-500 text-sm font-medium">Active Subscriptions</h3>
            <p class="text-2xl font-bold text-gray-800"><%= user.subscriptions ? user.subscriptions.length : 0 %></p>
          </div>
          <div class="bg-green-100 p-3 rounded-full">
            <i class="fas fa-check-circle text-green-600 text-xl"></i>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-500 text-sm font-medium">Account Status</h3>
            <p class="text-2xl font-bold text-gray-800"><%= user.role === 'admin' ? 'Admin' : 'Member' %></p>
          </div>
          <div class="bg-purple-100 p-3 rounded-full">
            <i class="fas fa-<%= user.role === 'admin' ? 'crown' : 'user' %> text-purple-600 text-xl"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- Certificate Grid -->
    <div class="mb-8">
      <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
        <i class="fas fa-th-large mr-3 text-blue-600"></i>
        Available Certificates
      </h2>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <% for(let i = 0; i < settings.length; i++) {
          const isSubscribed = user.subscriptions.some(sub => sub.configId === settings[i].id);
          const isAdmin = user.role === 'admin';
          const isAccessible = isSubscribed || isAdmin;
        %>
        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover animate-fade-in">
          <div class="p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="<%= isAccessible ? 'bg-green-100' : 'bg-gray-100' %> p-3 rounded-full">
                <i class="fas fa-<%= isAccessible ? 'certificate' : 'lock' %> text-<%= isAccessible ? 'green' : 'gray' %>-600 text-xl"></i>
              </div>
              <% if (isAccessible) { %>
                <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">
                  <i class="fas fa-check mr-1"></i>Accessible
                </span>
              <% } else { %>
                <span class="bg-gray-100 text-gray-600 text-xs font-medium px-2.5 py-0.5 rounded-full">
                  <i class="fas fa-lock mr-1"></i>Locked
                </span>
              <% } %>
            </div>
            
            <h3 class="text-lg font-semibold text-gray-800 mb-2 line-clamp-2"><%= settings[i].name %></h3>
            <p class="text-gray-600 text-sm mb-4">Professional certification program</p>
            
            <button
              class="w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 <%= isAccessible ? 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl' : 'bg-gray-300 text-gray-500 cursor-not-allowed' %>"
              onclick="<%= isAccessible ? `location.href='/certificates/generate/${settings[i].id}'` : 'showAccessModal()' %>"
              <%= isAccessible ? '' : 'disabled' %>
            >
              <% if (isAccessible) { %>
                <i class="fas fa-download mr-2"></i>Generate Certificate
              <% } else { %>
                <i class="fas fa-lock mr-2"></i>Subscription Required
              <% } %>
            </button>
          </div>
        </div>
        <% } %>
      </div>
    </div>
  </div>

  <!-- Access Modal -->
  <div id="accessModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all">
      <div class="text-center">
        <div class="bg-yellow-100 p-3 rounded-full inline-block mb-4">
          <i class="fas fa-exclamation-triangle text-yellow-600 text-2xl"></i>
        </div>
        <h3 class="text-lg font-semibold text-gray-800 mb-2">Subscription Required</h3>
        <p class="text-gray-600 mb-6">You need an active subscription to access this certificate.</p>
        <div class="flex gap-3">
          <button onclick="closeAccessModal()" class="flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
            Close
          </button>
          <button class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
            <i class="fas fa-crown mr-2"></i>Upgrade
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function showAccessModal() {
      document.getElementById('accessModal').classList.remove('hidden');
    }
    
    function closeAccessModal() {
      document.getElementById('accessModal').classList.add('hidden');
    }
  </script>





</body>
<footer class="text-white w-full "
        style="background-color: #03242c; background-image: url('https://shacpr.org.sa/images/footer-bg.png');background-size: cover">
  <div class="relative">
    <div class="container mx-auto px-4 py-6">
      <div class="grid  sm:grid-cols-2  lg:grid-cols-4 flex-wrap gap-4 container p-5">
        <div class="w-full  mb-6 md:mb-0" style="width: 270px">
          <div class="text-left">
            <div class="mb-4">
              <img id="footer-logo-img" class="mx-auto h-auto max-h-16" alt="image"
                   src="https://shacpr.org.sa/images/sha.png">
            </div>
            <h3 class="text-2xl  font-semibold mb-8">About Us</h3>
            <p class="text-sm font-light text-gray-200 text-justify  mb-8" style="width: 270px">
              The Saudi Heart Association, hereafter  called “The Association” is recognized at its premises and may have
              more chapters  in other locations if needed.
            </p>
            <p class="text-justify text-sm text-gray-200 font-light  w-72 mb-4"  style="width: 270px">
              The progression and development of the scientific thinking in the speciality of the Association.
            </p>
            <div class="mb-4">
              <img src="https://shacpr.org.sa/images/sha-transparent.png" id="logo-img" class="h-12 w-full"
                   alt="image">
            </div>
            <a href="/AboutUs/Index" class="text-white  ml-auto text-right w-fit  w-full flex justify-end" style="color: #ffa800">Read More</a>
          </div>
        </div>
        <div class="w-full">
          <h3 class="text-xl font-bold mb-2">Popular Courses</h3>
          <ul class="mt-10 gap-2 flex flex-col">
            <li><a href="#" class="text-white hover:text-green-700 translation-all duration-300 text-gray-200">SHA BLS Provider</a></li>
            <li><a href="#" class="text-white hover:text-green-700 translation-all duration-300 text-gray-200">SHA ACLS Provider</a></li>
            <li><a href="#" class="text-white hover:text-green-700 translation-all duration-300 text-gray-200">SHA PALS Provider</a></li>
            <li><a href="#" class="text-white hover:text-green-700 translation-all duration-300 text-gray-200">SHA NRP Provider</a></li>
            <li><a href="#" class="text-white hover:text-green-700 translation-all duration-300 text-gray-200">SHA HSFA CPR AED</a></li>
          </ul>
        </div>
        <div class="w-full ">
          <div class="flex flex-wrap">
            <div class="w-full mb-6 md:mb-0">
              <h3 class="text-xl font-bold mb-8 ">Quick Links</h3>
              <ul class="flex flex-col gap-2">
                <li><a href="/Home/Index" class="text-white hover:underline">Home</a></li>
                <li><a href="/Course/Index" class="text-white hover:underline">Courses</a></li>
                <li><a href="/OnlineCourses/Index" class="text-white hover:underline">Online Courses</a></li>
                <li><a href="/TrainingCenter/Index" class="text-white hover:underline">Training Centers</a></li>
                <li><a href="https://admin.shacpr.org.sa/Home/RegisterTrainingCenter"
                       class="text-white hover:underline">Become Training Center</a></li>
                <li><a href="http://ksacpr.org.sa/" class="text-white hover:underline">Browse for old CPR website</a>
                </li>
                <li><a href="https://admin.shacpr.org.sa" target="_blank" class="text-white hover:underline">For
                  Instructors and Coordinator</a></li>
              </ul>
              <ul class="flex flex-col gap-2 mt-2">

                <li class="font-bold text-xl"><a href="#" class="text-white hover:underline">Contact Us</a></li>
                <li class="text-2xl"><a target="_blank" href="http://tawk.to/shacprorgsa"
                                        class="text-white hover:underline">Support</a></li>

              </ul>
            </div>
          </div>
        </div>
        <div class="w-full ">
          <div class="w-full mb-6 md:mb-0">
            <h3 class="text-lg font-semibold mb-8">Quick Help</h3>
            <ul class="flex flex-col gap-4  ">
              <li><h5 class="text-sm font-semibold">CPR Chairman</h5><i class="fa fa-envelope-o"></i>&nbsp;<a
                href="mailto:info@precertificationn.com" class="text-white hover:underline -ml-1">info@precertificationn.com</a></li>
              <li><h5 class="text-sm font-semibold">CPR Registration</h5><i class="fa fa-envelope-o"></i>&nbsp;<a
                href="mailto:info@precertificationn.com"
                class="text-white hover:underline -ml-1">info@precertificationn.com</a></li>
              <li><h5 class="text-sm font-semibold">CPR Operation</h5><i class="fa fa-envelope-o"></i>&nbsp;<a
                href="mailto:info@precertificationn.com" class="text-white hover:underline -ml-1">info@precertificationn.com</a>
              </li>
              <li><h5 class="text-sm font-semibold">CPR Events</h5><i class="fa fa-envelope-o"></i>&nbsp;<a
                href="mailto:info@precertificationn.com" class="text-white hover:underline -ml-1">info@precertificationn.com</a></li>
              <li><h5 class="text-sm font-semibold">CPR Help Desk</h5><i class="fa fa-envelope-o"></i>&nbsp;<a
                href="mailto:info@precertificationn.com" class="text-white hover:underline -ml-1">info@precertificationn.com</a></li>
              <li><h3 class="text-xl mb-2 font-bold">Location</h3> Head Quarters<br>Office No. 603, Floor 6, Amaz
                Center<br>Near Voco Hotel,<br>King Fahad Road<br>Riyadh
              </li>
              <li class="text-2xl"><h3 class="text-xl mb-2 font-bold ">Call Us</h3>+1 (984) 833-3963</li>
              <li>
                <div class="w-full mb-6 md:mb-0 ">
                  <h3 class="text-lg font-semibold mb-2">Search E-Certificate</h3>
                  <p class="mb-4">Enter the eCertificate ID in the box and click on verify button to verify your
                    certificate</p>
                  <form id="subscribe-form" class="flex flex-col bg-white" method="post" action="/certificate-verify/:id">
                    <label for="certificate-id" class="sr-only">eCertificate ID</label>
                    <input type="text" id="certificate-id" name="Id" placeholder="Enter eCertificate ID" required
                           class="mb-2 outline-none px-4 py-2 border-0 text-black">
                    <button type="submit" class="bg-white text-gray-800 px-4 py-2 rounded hover:bg-gray-300">Verify<i
                      class="icon-right"></i></button>
                  </form>
                <script>
                  document.getElementById('subscribe-form').addEventListener('submit', function (event) {
                    // Prevent the default form submission
                    event.preventDefault();

                    // Get the input value
                    var certificateId = document.getElementById('certificate-id').value;

                    // Update the form action URL
                    var form = document.getElementById('subscribe-form');
                    form.action = form.action.replace(':id', encodeURIComponent(certificateId));

                    // Submit the form
                    form.submit();
                  });

                </script>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="text-white py-6 container mx-auto border-t border-gray-200 border-opacity-20">
    <div class="container mx-auto px-4">
      <div class="flex flex-wrap justify-between items-center mb-4">
        <div class="text-sm">
          <a href="https://github.com/Kareem-3del" class="flex items-center mb-2">
            Copyright © 2024 Saudi Heart Association 
            <span class="font-semibold ml-2">Powered by Kareem-3del</span>
            <img src="https://shacpr.org.sa/images/kr-logo300.png" class="inline-block w-8 ml-2" alt="Developer Logo">
          </a>
        </div>
        <div class="text-sm">
          <div class="flex items-center space-x-4">
            <span class="text-gray-300">Last Updated: <%= new Date().toLocaleDateString() %></span>
            <span class="text-gray-300">Version 2.0</span>
          </div>
        </div>
      </div>
      
      <!-- Audit Information -->
      <div class="border-t border-gray-600 border-opacity-30 pt-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-xs text-gray-300">
          <div class="flex items-center">
            <i class="fas fa-user-shield mr-2 text-blue-400"></i>
            <span>System Developed by: <strong>Kareem Abdel</strong></span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-calendar-alt mr-2 text-green-400"></i>
            <span>Created: April 2024</span>
          </div>
          <div class="flex items-center">
            <i class="fas fa-clock mr-2 text-yellow-400"></i>
            <span>Session: <%= new Date().toLocaleString() %></span>
          </div>
        </div>
        
        <div class="mt-3 text-center">
          <div class="inline-flex items-center px-4 py-2 bg-gray-700 bg-opacity-50 rounded-full">
            <i class="fas fa-shield-alt mr-2 text-green-400"></i>
            <span class="text-sm">Secure Certificate Management System</span>
            <div class="ml-3 flex items-center">
              <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse mr-1"></div>
              <span class="text-xs text-green-400">Online</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


</html>
